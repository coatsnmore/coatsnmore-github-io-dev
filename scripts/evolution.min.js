"use strict";var PixiGame=PixiGame||{},Utils=Utils||{};PixiGame.stage=null,PixiGame.renderer=null,PixiGame.gameLoopController=null,PixiGame.sceneController=null,PixiGame.world=null,PixiGame.controls=null,Utils.Colors=function(){var a=function(a){var b={};switch(b.background=13946044,a){case"attack":b.font=14893634,b.box=14893634;break;case"conversation":b.font=4351971,b.box=4351971;break;case"menu":b.font=0,b.box=0;break;case"trade":b.font=3964965,b.box=3964965;break;default:b.font=0,b.box=0}return b},b=function(a){var b={max:13930655,actual:12702864,font:0,border:0};return b},c=function(a){var b={background:13946044};return b},d=function(a){var b={background:13946044,font:0};return b},e=function(a){var b={background:13946044,font:0};return b};return{options:a,health:b,hud:c,log:d,turn:e}}(),Utils.OptionFactory=function(){var a=function(a,b,c,d,e){var f=5,g=new PIXI.Container,h=Utils.Colors.options,i=new PIXI.Graphics;i.beginFill(h(e).background),i.lineStyle(f,h(e).box),i.drawRect(0,0,d,c-f),i.endFill(),i.y=c*b,g.addChildAt(i,0);var j=new PIXI.Text(a.text,{font:"bold 20px Arial",fill:h(e).font,align:"center"});return j.x=d/2,j.y=c*b+f+c/3,j.anchor.x=.5,j.anchor.y=.5,j.wordWrap=!0,j.wordWrapWidth=d,g.addChildAt(j,1),g.interactive=!0,g.touchstart=g.mousedown=a.action,g.meta=a,g};return{createOption:a}}(),PixiGame.Controller=function(a){this._state={left:!1,right:!1,up:!1,fire:!1},this.setupPlayerControls()},PixiGame.Controller.constructor=PixiGame.Controller,PixiGame.Controller.prototype.setupPlayerControls=function(){window.addEventListener("keydown",function(a){this.changeControls(a.keyCode,!0)}.bind(this),!1),window.addEventListener("keyup",function(a){this.changeControls(a.keyCode,!1)}.bind(this),!1)},PixiGame.Controller.prototype.changeControls=function(a,b){switch(a){case 37:this._state.left=b;break;case 39:this._state.right=b;break;case 38:this._state.up=b;break;case 32:this._state.fire=b}},PixiGame.Controller.prototype.state=function(){return this._state},PixiGame.GameLoopController=function(){this._isGameActive=!1,this._fps=60,this._updateInterval=null},PixiGame.GameLoopController.constructor=PixiGame.GameLoopController,PixiGame.GameLoopController.prototype.tick=function(){this._isGameActive&&(requestAnimationFrame(this.tick.bind(this)),PixiGame.sceneController.update(),PixiGame.world.step(1/this._fps),PixiGame.renderer.render(PixiGame.stage))},PixiGame.GameLoopController.prototype.start=function(){this._isGameActive||(this._isGameActive=!0,this.tick())},PixiGame.GameLoopController.prototype.pause=function(){this._isGameActive&&(clearInterval(this._updateInterval),this._isGameActive=!1)},Object.defineProperty(PixiGame.GameLoopController.prototype,"isPaused",{get:function(){return!this._isGameActive}}),PixiGame.SceneController=function(a){this._currentScene=new a,this._previousScene=null,PixiGame.stage.addChild(this._currentScene)},PixiGame.SceneController.constructor=PixiGame.SceneController,PixiGame.SceneController.prototype.update=function(){this._currentScene.update()},PixiGame.SceneController.prototype.requestSceneChange=function(a){null!==this._currentScene&&(this._previousScene=this._currentScene,this._previousScene.destroy(),PixiGame.stage.removeChild(this._previousScene)),this._currentScene=new a,PixiGame.stage.addChild(this._currentScene)},PixiGame.BaseScene=function(){var a=0,b=0,c=0,d=0,e=function(e){b=PixiGame.height*(2/3),c=this.sizeX=PixiGame.width,d=this.sizeY=PixiGame.height/3;var f=new PIXI.Container,g=Utils.Colors.hud(),h=new PIXI.Graphics;return h.beginFill(g.background),h.lineStyle(1,g.background),h.drawRect(0,0,this.sizeX,this.sizeY),h.endFill(),f.addChildAt(h,0),console.log(a),console.log(b),f.x=a,f.y=b,f.alpha=.5,e.addChildAt(f,0),this},f=function(a){this.sizeX=100,this.sizeY=55;for(var b=[{text:"Menu",action:g}],c=(this.sizeX/b.length,new PIXI.Container),d=0;d<b.length;d++){var e=Utils.OptionFactory.createOption(b[d],d,this.sizeY,this.sizeX,"menu");c.addChild(e)}return c.x=0,c.y=PixiGame.height-this.sizeY+5,a.addChildAt(c,1),this},g=function(a){PixiGame.sceneController.requestSceneChange(PixiGame.MainMenuScene)},h=function(c){var e,f,g=Utils.Colors.log(),h=new PIXI.Container,i=new PIXI.Graphics;return i.beginFill(g.background),i.lineStyle(1,g.background),i.drawRect(0,0,PixiGame.width/3,d/2),i.endFill(),i.y=0,h.addChildAt(i,0),this.drawDamage=function(){e=new PIXI.Text("",{font:"24px Arial",fill:g.font,align:"center"}),e.x=0,e.y=0,h.addChildAt(e,1)}.bind(c),this.drawDamage(),this.updateDamage=function(a){e.text=a}.bind(c),this.drawAction=function(){f=new PIXI.Text("",{font:"24px Arial",fill:g.font,align:"center"}),f.x=0,f.y=50,h.addChildAt(f,2)}.bind(c),this.drawAction(),this.updateAction=function(a){f.text=a}.bind(c),h.x=a,h.y=b,c.addChild(h),this},i=function(a){var b=Utils.Colors.turn();a._playerTurn=!0;var c,d="Turn: ";return this.draw=function(){c=new PIXI.Text(d+"Player",{font:"24px Arial",fill:b.font,align:"center"}),c.x=2*PixiGame.width/3,c.y=PixiGame.height-50,a.addChild(c)}.bind(a),this.draw(),this.update=function(b){b?(c.text=d+"Player",a._combatContainer.active(!0)):(c.text=d+"Enemy",a._combatContainer.active(!1))}.bind(a),this};return{menu:f,log:h,hud:e,turn:i}}(),PixiGame.MainMenuScene=function(){PIXI.Graphics.call(this),this._playButton=null,this.setup()},PixiGame.MainMenuScene.constructor=PixiGame.MainMenuScene,PixiGame.MainMenuScene.prototype=Object.create(PIXI.Graphics.prototype),PixiGame.MainMenuScene.prototype.setup=function(){var a=PixiGame.width/3,b=60,c=new PIXI.Text("Evolution Game Components",{font:"bold 48px Arial",fill:16777215,align:"center",wordWrap:!0,wordWrapWidth:a});c.x=a,c.y=10,this.addChild(c);for(var d=[{text:"Space",action:this.handlePlayButtonPressed.bind(this)},{text:"Conversation",action:this.handleRPGPlayButtonPressed.bind(this)},{text:"Combat",action:this.handleCombatPlayButtonPressed.bind(this)}],e=new PIXI.Container,f=0;f<d.length;f++){var g=Utils.OptionFactory.createOption(d[f],f,b,a,"menu");e.addChild(g)}e.x=PixiGame.width/3,e.y=PixiGame.height/3,this.addChild(e)},PixiGame.MainMenuScene.prototype.handleRPGPlayButtonPressed=function(a){PixiGame.sceneController.requestSceneChange(PixiGame.RPGScene)},PixiGame.MainMenuScene.prototype.handlePlayButtonPressed=function(a){PixiGame.sceneController.requestSceneChange(PixiGame.GameScene)},PixiGame.MainMenuScene.prototype.handleCombatPlayButtonPressed=function(a){PixiGame.sceneController.requestSceneChange(PixiGame.CombatScene)},PixiGame.MainMenuScene.prototype.update=function(){},PixiGame.MainMenuScene.prototype.destroy=function(){this.removeChildren(),this._playButton=null},PixiGame.GameScene=function(){PIXI.Graphics.call(this),this._player={score:0,health:100,body:null,shape:null,graphics:null,size:50,speed:100,turnSpeed:2,bullets:{collection:[],speed:50,max:1,size:5}},this._enemies={collection:[],speed:75,size:50,amount:0,max:10},this.setup()},PixiGame.GameScene.constructor=PixiGame.GameScene,PixiGame.GameScene.prototype=Object.create(PIXI.Graphics.prototype),PixiGame.GameScene.prototype.setup=function(){this.hud().setup(),this.setupPlayer(),this.setupEnemies()},PixiGame.GameScene.prototype.hud=function(){var a=this,b={position:[20,20],setup:function(){var b=new PIXI.Container;b.x=this.position[0],b.y=this.position[1],this.score.redraw(b),this.health.redraw(b),a.addChildAt(b,0)},score:{text:"Score: ",update:function(b){a._player.score+=b,a.getChildAt(0).getChildAt(0).text=this.text+a._player.score},redraw:function(b){var c=new PIXI.Text(this.text+a._player.score,{font:"24px Arial",fill:16715792,align:"center"});b.addChildAt(c,0)}},health:{text:"Health: ",update:function(b){a._player.health+=b,a.getChildAt(0).getChildAt(1).text=this.text+Math.round(a._player.health)},redraw:function(b){var c=new PIXI.Text(this.text+a._player.health,{font:"24px Arial",fill:16715792,align:"center"});c.y=25,b.addChildAt(c,1)}}};return b},PixiGame.GameScene.prototype.playerFire=function(){var a=1.5*this._player.speed,b=this._player.body.angle-Math.PI/2,c={graphics:new PIXI.Graphics,body:new p2.Body({mass:0,damping:0,angularDamping:0}),active:!1};c.body.velocity[0]+=a*Math.cos(b)+this._player.body.velocity[0],c.body.velocity[1]+=a*Math.sin(b)+this._player.body.velocity[1],c.body.position[0]=this._player.size/2*Math.cos(b)+this._player.body.position[0],c.body.position[1]=this._player.size/2*Math.sin(b)+this._player.body.position[1];var d=new p2.Circle({radius:this._player.bullets.size});c.body.addShape(d),PixiGame.world.addBody(c.body),c.graphics.beginFill(16777215),c.graphics.lineStyle(1,16711680),c.graphics.drawRect(0,0,this._player.bullets.size,this._player.bullets.size),c.graphics.drawCircle(0,0,this._player.bullets.size),c.graphics.endFill(),this.addChild(c.graphics),this._player.bullets.collection.push(c)},PixiGame.GameScene.prototype.setupEnemies=function(){var a=this._enemies;setInterval(function(){if(!(a.amount>=a.max)){var b=Math.round(Math.random()*PixiGame.width),c=Math.round(Math.random()*PixiGame.height),d=(Math.random()-.5)*a.speed,e=(Math.random()-.5)*a.speed,f=(Math.random()-.5)*a.speed,g={body:new p2.Body({position:[b,c],mass:.1,damping:0,angularDamping:0,velocity:[d,e],angularVelocity:f}),graphics:new PIXI.Container},h=new p2.Circle({radius:a.size});g.body.addShape(h),PixiGame.world.addBody(g.body);var i=new PIXI.Graphics;i.beginFill(8054410),i.drawCircle(0,0,a.size),i.endFill(),g.graphics.addChild(i),this.addChild(g.graphics),a.collection.push(g),a.amount++}}.bind(this),1e3)},PixiGame.GameScene.prototype.setupPlayerBullets=function(){for(var a=(this._player,this._player.bullets),b=300,c=300,d=0;d<a.max;d++)a.bodies[d]=new p2.Body({mass:1,angularVelocity:0,damping:0,angularDamping:0,position:[b,c]}),a.shapes[d]=new p2.Box({width:a.size,height:a.size}),a.bodies[d].addShape(a.shapes[d]),PixiGame.world.addBody(a.bodies[d]),a.graphics[d]=new PIXI.Graphics,a.graphics[d].beginFill(16777215),a.graphics[d].lineStyle(5,16711680),a.graphics[d].drawRect(b,c,a.size,a.size),a.graphics[d].endFill(),this.addChild(a.graphics[d])},PixiGame.GameScene.prototype.setupPlayer=function(){var a=this._player;a.body=new p2.Body({mass:1,angularVelocity:0,damping:0,angularDamping:0,position:[PixiGame.width/2,PixiGame.height/2]}),a.shape=new p2.Box({width:a.size,height:a.size}),a.body.addShape(a.shape),PixiGame.world.addBody(a.body),a.graphics=new PIXI.Container;var b=new PIXI.Graphics;b.beginFill(12240598),b.moveTo(0,a.size),b.lineTo(0,a.size*(2/3)),b.lineTo(a.size/2,0),b.lineTo(a.size,a.size*(2/3)),b.lineTo(a.size,a.size),b.lineTo(a.size*(2/3),a.size*(2/3)),b.lineTo(a.size*(1/3),a.size*(2/3)),b.endFill(),a.graphics.addChildAt(b,0);var c=new PIXI.Graphics;c.beginFill(16248160),c.moveTo(a.size*(1/3),a.size*(2/3)),c.lineTo(a.size*(2/3),a.size*(2/3)),c.lineTo(.5*a.size,a.size),c.endFill(),c.alpha=0,a.graphics.addChildAt(c,1);var d=new PIXI.Graphics;d.beginFill(16248160),d.drawCircle(a.size/2,a.size/2,a.size),d.endFill(),d.alpha=.1,a.graphics.addChildAt(d,2);var e=new PIXI.Graphics;e.beginFill(13582433),e.drawCircle(a.size/2,a.size/2,a.size),e.endFill(),e.alpha=0,a.graphics.addChildAt(e,3),a.graphics.pivot.x=a.size/2,a.graphics.pivot.y=a.size/2,this.addChild(a.graphics)},PixiGame.GameScene.prototype.update=function(){var a=this._player,b=this._enemies.collection,c=PixiGame.controls.state(),d=a.graphics.getChildAt(1),e=a.bullets.collection;c.fire&&this.playerFire();for(var f=function(a,b,c){0>b?a.position[0]=PixiGame.width:b>PixiGame.width&&(a.position[0]=0),0>c?a.position[1]=PixiGame.height:c>PixiGame.height&&(a.position[1]=0)},g=0;g<e.length;g++){var h=e[g];h.graphics.x=h.body.position[0],h.graphics.y=h.body.position[1]}for(var i=0;i<b.length;i++){var j=b[i],k=Math.abs(j.body.position[0]-a.body.position[0]),l=Math.abs(j.body.position[1]-a.body.position[1]),m=Math.atan(l/k);m+Math.PI/2;j.graphics.x=j.body.position[0],j.graphics.y=j.body.position[1],f(j.body,j.body.position[0],j.body.position[1])}if(c.left?a.body.angularVelocity=-1*a.turnSpeed:c.right?a.body.angularVelocity=a.turnSpeed:a.body.angularVelocity=0,c.up){var n=a.body.angle+Math.PI/2;a.body.force[0]-=a.speed*Math.cos(n),a.body.force[1]-=a.speed*Math.sin(n),d.alpha=1}else d.alpha=0;var o=a.body.position[0],p=a.body.position[1];f(a.body,o,p),a.graphics.x=a.body.position[0],a.graphics.y=a.body.position[1],a.graphics.rotation=a.body.angle,PixiGame.world.on("beginContact",function(c){var d=function(a,b,c){for(var d=0;d<a.length;d++)if(a[d].body.id===b||a[d].body.id===c)return!0;return!1};if(c.bodyB.id===a.body.id||c.bodyA.id===a.body.id){var e=a.graphics.getChildAt(3);e.alpha=.25,d(b,c.bodyA.id,c.bodyB.id)&&this.hud().health.update(-.1)}for(var f=0;f<b.length;f++){var g=b[f];if((c.bodyB.id===g.body.id||c.bodyA.id===g.body.id)&&d(a.bullets.collection,c.bodyA.id,c.bodyB.id)){g.graphics.alpha=.1;var h=b.splice(f,1)[0];this.removeChild(h.graphics),this._enemies.amount--,this.hud().score.update(5)}}}.bind(this)),PixiGame.world.on("endContact",function(b){if(b.bodyB.id===a.body.id||b.bodyA.id===a.body.id){var c=a.graphics.getChildAt(3);c.alpha=0}}.bind(this)),a.health<0&&(console.log("game over"),PixiGame.score=a.score,this.gameEnd())},PixiGame.GameScene.prototype.gameEnd=function(a){PixiGame.sceneController.requestSceneChange(PixiGame.EndGameScene)},PixiGame.GameScene.prototype.destroy=function(){this.removeChildren()},PixiGame.RPGScene=function(){PIXI.Graphics.call(this),this._colorMap={neutral:12113500,good:6084227,evil:14048377},this.setup()},PixiGame.RPGScene.constructor=PixiGame.GameScene,PixiGame.RPGScene.prototype=Object.create(PIXI.Graphics.prototype),PixiGame.RPGScene.prototype.setup=function(){this.setupConvo(),this.setupResponse()},PixiGame.RPGScene.prototype.setupResponse=function(){this._responseText=new PIXI.Text("adsf",{align:"center"}),this._responseText.x=0,this._responseText.y=60,this.addChild(this._responseText)},PixiGame.RPGScene.prototype.setupConvo=function(){for(var a=2*PixiGame.width/3,b=[{"class":"neutral",text:"Which way to the sun?"},{"class":"evil",text:"If you tell me where the sun \nis, I won't kill you."},{"class":"good",text:"Help me help you."}],c=new PIXI.Container,d=0;d<b.length;d++){console.log("convo[i]: "+b[d]);var e=this.createConvoOption(b[d],d);c.addChildAt(e,d)}c.x=a,this.addChild(c)},PixiGame.RPGScene.prototype.createConvoOption=function(a,b){var c=60,d=PixiGame.width/3,e=5,f=new PIXI.Container,g=new PIXI.Graphics;g.beginFill(16777215),g.lineStyle(e,this._colorMap[a["class"]]),g.drawRect(0,0,d,c-e),g.endFill(),g.y=c*b,f.addChildAt(g,0);var h=new PIXI.Text(a.text,{font:"20px Lucia Console",fill:this._colorMap[a["class"]],align:"center"});return h.x=e,h.y=c*b+e,h.wordWrap=!0,h.wordWrapWidth=d,f.addChildAt(h,1),f.interactive=!0,f.touchstart=f.mousedown=this.handleConvoOptionTouch.bind(this),f.oid=b,f},PixiGame.RPGScene.prototype.handleConvoOptionTouch=function(a){var b=[{"class":"neutral",text:"I'm reluctant, but okay."},{"class":"evil",text:"I will kill you!"},{"class":"good",text:"Let me help you."}],c=b[a.target.oid];this._responseText.text=c.text,this._responseText.style.fill="#"+this._colorMap[c["class"]].toString(16),console.log("this._colorMap[response.class].toString(16): "+this._colorMap[c["class"]].toString(16))},PixiGame.RPGScene.prototype.update=function(){},PixiGame.RPGScene.prototype.gameEnd=function(a){PixiGame.sceneController.requestSceneChange(PixiGame.MainMenuScene)},PixiGame.RPGScene.prototype.destroy=function(){this.removeChildren()},PixiGame.CombatScene=function(){PIXI.Graphics.call(this),this._hud=PixiGame.BaseScene.hud(this),this._menu=PixiGame.BaseScene.menu(this),this._log=PixiGame.BaseScene.log(this),this._turn=PixiGame.BaseScene.turn(this),this._player={name:"Player",health:100,maxHealth:100},this._enemy={name:"Enemy",health:100,maxHealth:100},this._attacks=[{text:"laser 5 - 10",min:5,max:10,action:this.handleCombatOptionTouch.bind(this)},{text:"missile 1 - 20",min:1,max:20,action:this.handleCombatOptionTouch.bind(this)},{text:"sabotage 7",min:7,max:7,action:this.handleCombatOptionTouch.bind(this)}],this._combatContainer={},this.setup()},PixiGame.CombatScene.constructor=PixiGame.CombatScene,PixiGame.CombatScene.prototype=Object.create(PIXI.Graphics.prototype),PixiGame.CombatScene.prototype.setup=function(){this.setupCombat(),this.setupAllHealth()},PixiGame.CombatScene.prototype.setupAllHealth=function(){this.setupHealth(this._player,this._menu.sizeX,PixiGame.height-50),this.setupHealth(this._enemy,2*PixiGame.width/3,0)},PixiGame.CombatScene.prototype.setupHealth=function(a,b,c){var d,e=5,f=PixiGame.width/3,g=50,h=new PIXI.Container,i=new PIXI.Graphics,j=new PIXI.Graphics;a.healthDraw=function(){var k=Utils.Colors.health();i.beginFill(k.max),i.lineStyle(e,k.border),i.drawRect(0,0,f,g),i.endFill(),h.addChildAt(i,0),j.beginFill(k.actual),j.lineStyle(e,k.border),j.drawRect(0,0,f,g),j.endFill(),h.addChildAt(j,1),d=new PIXI.Text(""+a.name,{font:"24px Arial",fill:k.font,align:"center",wordWrap:!0,wordWrapWidth:f}),d.x=5,d.y=g/3,h.addChildAt(d,2),h.x=b,h.y=c,this.addChild(h)}.bind(this),a.healthDraw(),a.updateHealth=function(b){a.health-=b,a.health>=0?j.width=a.health/a.maxHealth*f:j.width=0,this._log.updateDamage(a.name+" damaged for "+b+"!!")}.bind(this)},PixiGame.CombatScene.prototype.setupCombat=function(){for(var a=(2*PixiGame.width/3,new PIXI.Container),b=60,c=PixiGame.width/3,d=0;d<this._attacks.length;d++){var e=Utils.OptionFactory.createOption(this._attacks[d],d,b,c,"attack");a.addChildAt(e,d)}a.x=2*PixiGame.width/3,a.y=2*PixiGame.height/3,this.addChild(a),a.turnActive=this._playerTurn,a.active=function(b){var c=a.children;if(b){a.interactive=!0,a.alpha=1;for(var d=0;d<c.length;d++)c[d].interactive=!0}else{a.interactive=!1,a.alpha=.5;for(var e=0;e<c.length;e++)c[e].interactive=!1}},this._combatContainer=a},PixiGame.CombatScene.prototype.handleCombatOptionTouch=function(a){var b=a.target.meta.min,c=a.target.meta.max,d=Math.floor(Math.random()*(c-b+1))+b;this._log.updateAction("player performs "+a.target.meta.text),this._enemy.updateHealth(d),this._turn.update(!1),this.enemyTurn()},PixiGame.CombatScene.prototype.enemyTurn=function(a){var b=500,c=1,d=this._attacks.length,e=Math.floor(Math.random()*(d-c+1))+c,f=this._attacks[e-1],g=f.min,h=f.max,i=Math.floor(Math.random()*(h-g+1))+g;window.setTimeout(function(){this._player.updateHealth(i),this._log.updateAction("enemy performs "+f.text),this._turn.update(!0)}.bind(this),b)},PixiGame.CombatScene.prototype.update=function(){this._player.health<=0},PixiGame.CombatScene.prototype.gameEnd=function(a){PixiGame.sceneController.requestSceneChange(PixiGame.MainMenuScene)},PixiGame.CombatScene.prototype.destroy=function(){this.removeChildren()},PixiGame.EndGameScene=function(){PIXI.Graphics.call(this),this._playButton=null,this.setup()},PixiGame.EndGameScene.constructor=PixiGame.EndGameScene,PixiGame.EndGameScene.prototype=Object.create(PIXI.Graphics.prototype),PixiGame.EndGameScene.prototype.setup=function(){this._playButton=new PIXI.Sprite.fromImage("images/game/play-game-btn.png"),this._playButton.anchor=new PIXI.Point(.5,.5),this._playButton.position.x=PixiGame.width/2,this._playButton.position.y=PixiGame.height/2,this._playButton.interactive=!0,this._playButton.touchstart=this._playButton.mousedown=this.handlePlayButtonPressed.bind(this),console.log("this: "+this),this.addChild(this._playButton);var a=new PIXI.Text("Current Score: "+PixiGame.score,{font:"24px Arial",fill:16715792,align:"center"});if(a.x=PixiGame.width/2-30,a.y=PixiGame.height/2-100,this.addChildAt(a,0),PixiGame.score>PixiGame.highScore){PixiGame.highScore=PixiGame.score;var b=new PIXI.Text("New High Score!",{font:"24px Arial",fill:16715792,align:"center"});b.x=PixiGame.width/2-30,b.y=PixiGame.height/2-150,this.addChildAt(b,0)}var c=new PIXI.Text("High Score: "+PixiGame.score,{font:"24px Arial",fill:16715792,align:"center"});c.x=PixiGame.width/2-30,c.y=PixiGame.height/2-200,this.addChildAt(c,0)},PixiGame.EndGameScene.prototype.handlePlayButtonPressed=function(a){PixiGame.sceneController.requestSceneChange(PixiGame.GameScene)},PixiGame.EndGameScene.prototype.update=function(){},PixiGame.EndGameScene.prototype.destroy=function(){this.removeChildren(),this._playButton=null},document.addEventListener("DOMContentLoaded",function(){PixiGame.width=document.documentElement.clientWidth,PixiGame.height=document.documentElement.clientHeight,PixiGame.renderer=new PIXI.autoDetectRenderer(PixiGame.width,PixiGame.height),PixiGame.renderer.view.setAttribute("class","renderer"),document.body.appendChild(PixiGame.renderer.view),PixiGame.stage=new PIXI.Container,PixiGame.world=new p2.World({gravity:[0,0]}),PixiGame.controls=new PixiGame.Controller,PixiGame.sceneController=new PixiGame.SceneController(PixiGame.MainMenuScene),PixiGame.score=0,PixiGame.highScore=0,PixiGame.gameLoopController=new PixiGame.GameLoopController,PixiGame.gameLoopController.start()});